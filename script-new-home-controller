app.controller('newHomeController', function ($scope, $http, $timeout, $location, $interval, $rootScope) {
    $interval.cancel($rootScope.dumpStatusPromise);
	$interval.cancel($rootScope.upgradeStatusPromise);
	$rootScope.titleHeader = 'Power Distribution';
	$rootScope.sfcmCount = 0;
	$rootScope.bcmCount = 0;
	$rootScope.objPDU;
    $rootScope.objBCM;
    $rootScope.objSFCM;
    
    //service or function to draw the SVG mimic: START
    $scope.invokeDeviceStatusService = function(){
		$http.get('http://' + HOSTNAME + ':' + PORT + '/getdata.cgi?devicestatus')
			.then(function(response){
                $rootScope.deviceStatusArr = response.devicestatus;
                    $scope.networkFailure=false;
                    $scope.deviceAvailable=true;

                    for(var i = 0; i <= response.devicestatus.length; i++) 
                    {
                        switch($rootScope.deviceStatusArr.Type)
                        {
                            case "PDU":
                                $rootScope.objPDU.push($rootScope.deviceStatusArr[i]);
                                break;
                            case "BCM":
                                $rootScope.objBCM = device;
                                $scope.bcmPanelRequestUri1 = 'http://' + HOSTNAME + ':' + PORT + '/getdata.cgi?meters?PanelConfig/submeters/' + parseInt($scope.deviceStatusArr[i].Id) + '/1';
                                $scope.bcmPanelRequestUri2 = 'http://' + HOSTNAME + ':' + PORT + '/getdata.cgi?meters?PanelConfig/submeters/' + parseInt($scope.deviceStatusArr[i].Id) + '/2';
                                $scope.bcmPanelRequestUri3 = 'http://' + HOSTNAME + ':' + PORT + '/getdata.cgi?meters?PanelConfig/submeters/' + parseInt($scope.deviceStatusArr[i].Id) + '/3';
                                $scope.bcmPanelRequestUri4 = 'http://' + HOSTNAME + ':' + PORT + '/getdata.cgi?meters?PanelConfig/submeters/' + parseInt($scope.deviceStatusArr[i].Id) + '/4';
                                $http.get($scope.bcmPanelRequestUri1)
                                    .then(function(response1) {
                                            $scope.isOnOff = response1.PanelConfig.OnOff; 
                                            console.log("Value of Panel 1 is:"+$scope.isOnOff);
                                                if($scope.isOnOff === 'true'){
                                                    $rootScope.bcmCount++;
                                                    //response1.PanelConfig.OnOff = true;
                                                }
                                                else{
                                                    $scope.bcmPanelConfig1.OnOff = false;
                                                } 
                                            }).catch(function (response1){
                                            $scope.networkFailure=true;
                                            })
                                    $http.get($scope.bcmPanelRequestUri2)
                                    .then(function(response2) {
                                            $scope.isOnOff = response2.PanelConfig.OnOff; 
                                            console.log("Value of Panel 2 is:"+$scope.isOnOff);
                                                if($scope.isOnOff === 'true'){
                                                    $rootScope.bcmCount++;
                                                }
                                                else{
                                                    $scope.bcmPanelConfig2.OnOff = false;
                                                } 
                                            }).catch(function (response2){
                                            $scope.networkFailure=true;
                                            })
                                        $http.get($scope.bcmPanelRequestUri3)
                                        .then(function(response3) {
                                                $scope.isOnOff = response3.PanelConfig.OnOff; 
                                                console.log("Value of Panel 3 is:"+$scope.isOnOff);
                                                    if($scope.isOnOff === 'true'){
                                                        $rootScope.bcmCount++;
                                                    }
                                                    else{
                                                        $scope.bcmPanelConfig3.OnOff = false;
                                                    } 
                                                }).catch(function (response1){
                                                $scope.networkFailure=true;
                                                })
                                            $http.get($scope.bcmPanelRequestUri4)
                                            .then(function(response4) {
                                                    $scope.isOnOff = response4.PanelConfig.OnOff; 
                                                    console.log("Value of Panel 4 is:"+$scope.isOnOff);
                                                        if($scope.isOnOff === 'true'){
                                                            $rootScope.bcmCount++;
                                                        }
                                                        else{
                                                            $scope.bcmPanelConfig4.OnOff = false;
                                                        } 
                                                    }).catch(function (response4){
                                                    $scope.networkFailure=true;
                                                    })
//                                            });                                                   
//                                        });
//                                    });
//                                });
                                break;
                            case "SFCM":
                                $rootScope.objSFCM.push($rootScope.deviceStatusArr[i]);
                                break;
                        }
                    }
                        console.log($rootScope.objBCM);
                        console.log($rootScope.objSFCM);

                    //$scope.identifyBCM($rootScope.objBCM);
                    //$scope.identifySubFeeder(objSFCM);


                    //console.log("****** PDU ***** : "+$rootScope.objPDU["Type"]+", "+$scope.objPDU["load%"]);
                    console.log("****** BCM ***** : "+$rootScope.bcmCount);
                    console.log("****** SFCM ***** : "+$rootScope.objSFCM.length);
                    $scope.circuitContainer = $("#main-svg-container");
                    $scope.pduContainer = $("#pdu-container");
                    $scope.bsContainer = $("#bs-container");
                    $scope.svg_pdu = function svg_pduLoad(){
                         var svg_pdu = document.createElementNS("http://www.w3.org/2000/svg", 'svg'); //create svg element
                        svg_pdu.setAttribute("viewBox","0 0 210 220");
                        svg_pdu.setAttribute("preserveAspectRatio","xMidYMid meet");
                        svg_pdu.setAttribute("version","1.1");
                        svg_pdu.setAttribute("class","pdu");
                        $scope.circuitContainer.append(svg_pdu);
                        //pdu middle lines
                        var middleLineGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        middleLineGroup.setAttribute("id","pdu-middle-lines"); //Set g's id
                        svg_pdu.append(middleLineGroup);
                        var middleLine1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        middleLine1.setAttribute("d","M 44.252753,135.45093 C 164.95305,133.94576 167.4503,134.69835 167.4503,134.69835 h -1.66482"); //Set path's data
                        middleLine1.setAttribute("style","fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.84947181;"); //Set path's styles
                        var middleLine2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        middleLine2.setAttribute("d","M 44.045541,139.09776 C 165.15194,137.59445 167.65759,138.3461 167.65759,138.3461 h -1.67043"); //Set path's data
                        middleLine2.setAttribute("style","fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.85249639;"); //Set path's styles
                        var pduMiddleLinesGroup = document.getElementById("pdu-middle-lines");
                        pduMiddleLinesGroup.append(middleLine1);                                        pduMiddleLinesGroup.append(middleLine2);
                        /***********pdu top part***********/
                        var pduTopGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduTopGroup.setAttribute("id","pdu-top"); //Set g's id
                        svg_pdu.append(pduTopGroup);
                        //pdu top center line
                        var pduTopLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        pduTopLine.setAttribute("y","27.848412");                   
                        pduTopLine.setAttribute("x","105.15416");
                        pduTopLine.setAttribute("height","81.10318");                    pduTopLine.setAttribute("width","1.812");
                        pduTopLine.setAttribute("style","display:inline;fill:#ffffff;")
                        pduTopGroup.append(pduTopLine);
                        /***********pdu top left curves***********/
                        var pduTopLeftCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduTopLeftCurveGroup.setAttribute("id","pdu-top-left-curve"); //Set g's id
                        svg_pdu.append(pduTopLeftCurveGroup);
                        var topLeftCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topLeftCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        topLeftCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topLeftCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topLeftCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        topLeftCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topLeftCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topLeftCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        topLeftCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduTopLeftCurveGroup.append(topLeftCurve1);                    pduTopLeftCurveGroup.append(topLeftCurve2);
                        pduTopLeftCurveGroup.append(topLeftCurve3);
                        /***********pdu top right curves***********/
                        var pduTopRightCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduTopRightCurveGroup.setAttribute("id","pdu-top-right-curve"); //Set g's id
                        pduTopRightCurveGroup.setAttribute("transform","translate(57.466688,0.87762149)");
                        svg_pdu.append(pduTopRightCurveGroup);
                        var topRightCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topRightCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        topRightCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topRightCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topRightCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        topRightCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topRightCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topRightCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        topRightCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduTopRightCurveGroup.append(topRightCurve1);                    pduTopRightCurveGroup.append(topRightCurve2);
                        pduTopRightCurveGroup.append(topRightCurve3);

                        /***********pdu bottom part***********/
                        var pduBottomGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduBottomGroup.setAttribute("id","pdu-bottom"); //Set g's id
                        svg_pdu.append(pduBottomGroup);
                        //pdu bottom center line
                        var pduBottomLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        pduBottomLine.setAttribute("y","161.75018");                   
                        pduBottomLine.setAttribute("x","105.05904");
                        pduBottomLine.setAttribute("height","81.10318");                    pduBottomLine.setAttribute("width","1.812");
                        pduBottomLine.setAttribute("style","display:inline;fill:#ffffff;")
                        pduBottomGroup.append(pduBottomLine);
                        /***********pdu bottom left curves***********/
                        var pduBottomLeftCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduBottomLeftCurveGroup.setAttribute("id","pdu-top-left-curve"); //Set g's id
                        pduBottomLeftCurveGroup.setAttribute("transform","rotate(180,77.216618,134.91208)");
                        svg_pdu.append(pduBottomLeftCurveGroup);
                        var bottomLeftCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomLeftCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        bottomLeftCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomLeftCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomLeftCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        bottomLeftCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomLeftCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomLeftCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        bottomLeftCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduBottomLeftCurveGroup.append(bottomLeftCurve1);                    pduBottomLeftCurveGroup.append(bottomLeftCurve2);
                        pduBottomLeftCurveGroup.append(bottomLeftCurve3);
                        /***********pdu bottom right curves***********/
                        var pduBottomRightCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduBottomRightCurveGroup.setAttribute("id","pdu-bottom-right-curve"); //Set g's id
                        pduBottomRightCurveGroup.setAttribute("transform","rotate(180,106.04625,134.91214)");
                        svg_pdu.append(pduBottomRightCurveGroup);
                        var bottomRightCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomRightCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        bottomRightCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomRightCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomRightCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        bottomRightCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomRightCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomRightCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        bottomRightCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduBottomRightCurveGroup.append(bottomRightCurve1);                    pduBottomRightCurveGroup.append(bottomRightCurve2);
                        pduBottomRightCurveGroup.append(bottomRightCurve3);
                        //voltage symbol: START
                        var pduVoltageSign = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        pduVoltageSign.setAttribute("d","m 61.232141,60.764882 -9.378412,0.122962 4.582717,-8.183423 z");
                        pduVoltageSign.setAttribute("style","opacity:1;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.61626506;");
                        pduVoltageSign.setAttribute("transform","matrix(1.0118631,0,0,1.2312215,-26.963536,47.692866)");
                        svg_pdu.append(pduVoltageSign);
                        //voltage symbol : END
                        //letter Y : START
                        var pduYLetter = document.createElementNS("http://www.w3.org/2000/svg",'text');
                        pduYLetter.setAttribute("style","font-size:16px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;");
                        pduYLetter.setAttribute("transform","scale(1.0028955,0.99711289)");
                        pduYLetter.setAttribute("x",'25.997938');
                        pduYLetter.setAttribute("y",'163.35176');
                        svg_pdu.append(pduYLetter);
                        var pduYLetterText = document.createElementNS("http://www.w3.org/2000/svg",'tspan');
                        pduYLetterText.setAttribute("id",'pduLabelText');
                        pduYLetter.append(pduYLetterText);
                        pduLabelText.textContent = "Y";
                        pduYLetterText.setAttribute("style","fill:#ffffff;fill-opacity:1;stroke-width:0.40014985");
                        //letter Y : END
                        return svg_pdu;
                    }
                    $scope.svg_pduWithLine = function svg_pduWithLineLoad(){
                         var svg_pduWithLine = document.createElementNS("http://www.w3.org/2000/svg", 'svg'); //create svg element
                        svg_pduWithLine.setAttribute("viewBox","0 0 210 127");
                        svg_pduWithLine.setAttribute("preserveAspectRatio","xMidYMid meet");
                        svg_pduWithLine.setAttribute("version","1.1");
                        svg_pduWithLine.setAttribute("class","pdu");
                        $scope.pduContainer.append(svg_pduWithLine);
                        //pdu middle lines
                        var pduWithLineGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        svg_pduWithLine.append(pduWithLineGroup);
                        var middleLine1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        middleLine1.setAttribute("d"," M 73.424044,73.59191 C 131.79521,72.875583 133.0029,73.233743 133.0029,73.233743 h -0.80512"); //Set path's data
                        middleLine1.setAttribute("style","stroke:#ffffff;stroke-width:0.84947181;"); //Set path's styles
                        var middleLine2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        middleLine2.setAttribute("d","m 73.407244,75.819138 c 58.414266,-0.716121 59.622836,-0.358065 59.622836,-0.358065 h -0.80572"); //Set path's data
                        middleLine2.setAttribute("style","stroke:#ffffff;stroke-width:0.85249639;"); //Set path's styles
                        pduWithLineGroup.append(middleLine1);                                        pduWithLineGroup.append(middleLine2);
                        /***********pdu top part***********/
                        var pduTopLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        pduTopLine.setAttribute("y","23.490372");                   
                        pduTopLine.setAttribute("x","103.16511");
                        pduTopLine.setAttribute("height","37.759335");                    pduTopLine.setAttribute("width","0.99060559");
                        pduTopLine.setAttribute("style","display:inline;fill:#ffffff;")
                        pduWithLineGroup.append(pduTopLine);
                        //pdu bottom center line
                        var pduBottomLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        pduBottomLine.setAttribute("y","86.88958");                   
                        pduBottomLine.setAttribute("x","102.76957");
                        pduBottomLine.setAttribute("height","37.759335");                    pduBottomLine.setAttribute("width","0.99060559");
                        pduBottomLine.setAttribute("style","display:inline;fill:#ffffff;")
                        pduWithLineGroup.append(pduBottomLine);
                        /***********pdu top left curves***********/
                        var pduTopLeftCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduTopLeftCurveGroup.setAttribute("id","pdu-top-left-curve"); //Set g's id
                        pduTopLeftCurveGroup.setAttribute("transform","matrix(0.51306838,0,0,0.46557154,48.989756,9.9957783)");
                        svg_pduWithLine.append(pduTopLeftCurveGroup);
                        var topLeftCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topLeftCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        topLeftCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topLeftCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topLeftCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        topLeftCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topLeftCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topLeftCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        topLeftCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduTopLeftCurveGroup.append(topLeftCurve1);                    pduTopLeftCurveGroup.append(topLeftCurve2);
                        pduTopLeftCurveGroup.append(topLeftCurve3);
                        /***********pdu top right curves***********/
                        var pduTopRightCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduTopRightCurveGroup.setAttribute("id","pdu-top-right-curve"); //Set g's id
                        pduTopRightCurveGroup.setAttribute("transform","matrix(0.49276875,0,0,0.46557154,80.046454,9.8752073)");
                        svg_pduWithLine.append(pduTopRightCurveGroup);
                        var topRightCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topRightCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        topRightCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topRightCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topRightCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        topRightCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var topRightCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        topRightCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        topRightCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduTopRightCurveGroup.append(topRightCurve1);                    pduTopRightCurveGroup.append(topRightCurve2);
                        pduTopRightCurveGroup.append(topRightCurve3);

                        /***********pdu bottom part***********/

                        /***********pdu bottom left curves***********/
                        var pduBottomLeftCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduBottomLeftCurveGroup.setAttribute("id","pdu-top-left-curve"); //Set g's id
                        pduBottomLeftCurveGroup.setAttribute("transform","matrix(-0.49953529,0,0,-0.46557154,127.53089,137.73486)");
                        svg_pduWithLine.append(pduBottomLeftCurveGroup);
                        var bottomLeftCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomLeftCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        bottomLeftCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomLeftCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomLeftCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        bottomLeftCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomLeftCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomLeftCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        bottomLeftCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduBottomLeftCurveGroup.append(bottomLeftCurve1);                    pduBottomLeftCurveGroup.append(bottomLeftCurve2);
                        pduBottomLeftCurveGroup.append(bottomLeftCurve3);
                        /***********pdu bottom right curves***********/
                        var pduBottomRightCurveGroup = document.createElementNS("http://www.w3.org/2000/svg", 'g'); //Create a defs in SVG's namespace
                        pduBottomRightCurveGroup.setAttribute("id","pdu-bottom-right-curve"); //Set g's id
                        pduBottomRightCurveGroup.setAttribute("transform","matrix(-0.47698015,0,0,-0.46557154,154.02451,137.73491)");
                        svg_pduWithLine.append(pduBottomRightCurveGroup);
                        var bottomRightCurve1 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomRightCurve1.setAttribute("d","m 86.303367,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274541,9.28542 l 0.450124,0.0149 a 8.8974716,11.489009 0 0 0 8.727094,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.315864,11.30576 l -0.529456,-0.0169 a 10.467615,13.495026 0 0 1 -9.786813,-11.28892 z"); //Set path's data
                        bottomRightCurve1.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomRightCurve2 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomRightCurve2.setAttribute("d","m 67.260005,108.07398 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274538,9.28542 l 0.45013,0.0149 a 8.8974716,11.489009 0 0 0 8.72709,-9.30021 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31586,11.30576 l -0.52946,-0.0169 a 10.467615,13.495026 0 0 1 -9.786812,-11.28892 z"); //Set path's data
                        bottomRightCurve2.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        var bottomRightCurve3 = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bottomRightCurve3.setAttribute("d","m 47.687472,108.07397 h 1.591604 a 8.8974716,11.489009 0 0 0 8.274542,9.28542 l 0.45012,0.0149 a 8.8974716,11.489009 0 0 0 8.7271,-9.3002 h 1.58877 a 10.467615,13.495026 0 0 1 -10.31587,11.30576 l -0.52945,-0.0169 a 10.467615,13.495026 0 0 1 -9.786816,-11.28892 z"); //Set path's data
                        bottomRightCurve3.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        pduBottomRightCurveGroup.append(bottomRightCurve1);                    pduBottomRightCurveGroup.append(bottomRightCurve2);
                        pduBottomRightCurveGroup.append(bottomRightCurve3);
                        //voltage and letter Y symbols: START
                        var pduVoltageSign = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        pduVoltageSign.setAttribute("id","pduVoltage");
                        pduVoltageSign.setAttribute("d","m 61.232141,60.764882 -9.378412,0.122962 4.582717,-8.183423 z");
                        pduVoltageSign.setAttribute("style","opacity:1;fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:0.61626506;");
                        pduVoltageSign.setAttribute("transform","matrix(0.6692784,0,0,0.82590072,27.986742,17.654586)");
                        svg_pduWithLine.append(pduVoltageSign);
                        var pduYLetter = document.createElementNS("http://www.w3.org/2000/svg",'text');
                        pduYLetter.setAttribute("style","font-size:8px;line-height:1.25;font-family:sans-serif;fill:#000000;fill-opacity:1;");
                        pduYLetter.setAttribute("transform","scale(0.94756847,1.0553327)");
                        pduYLetter.setAttribute("x",'66.86174');
                        pduYLetter.setAttribute("y",'84.010979');
                        svg_pduWithLine.append(pduYLetter);
                        var pduYLetterText = document.createElementNS("http://www.w3.org/2000/svg",'tspan');
                        pduYLetterText.setAttribute("id",'pduLabelText');
                        pduYLetter.append(pduYLetterText);
                        pduLabelText.textContent = "Y";
                        pduYLetterText.setAttribute("style","fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.40014985");
                        //voltage and letter Y symbols: END
                        //connector line
                        var pduConnectorLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        pduConnectorLine.setAttribute("y","124.38097");                   
                        pduConnectorLine.setAttribute("x","-15.493953");
                        pduConnectorLine.setAttribute("height","0.59938949");                    pduConnectorLine.setAttribute("width","500.52371");
                        pduConnectorLine.setAttribute("style","fill:#ffffff;")
                        svg_pduWithLine.append(pduConnectorLine);
                        return svg_pduWithLine;
                    }
                    $scope.svg_sfcm = function svg_sfcmLoad(){
                        var svgSFCMWrapper = document.createElement("div");
                       svgSFCMWrapper.setAttribute("class","sfcmWrapper");
                       $scope.bsContainer.append(svgSFCMWrapper);
                        var svg_sfcm = document.createElementNS("http://www.w3.org/2000/svg", 'svg'); //create svg element
                        svg_sfcm.setAttribute("viewBox","0 0 210 227");
                        svg_sfcm.setAttribute("preserveAspectRatio","");
                        svg_sfcm.setAttribute("version","1.1");
                        svg_sfcm.setAttribute("class","sfcm");
                        svgSFCMWrapper.append(svg_sfcm);
                        //sfcm top line
                        var sfcmTopLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        sfcmTopLine.setAttribute("y","0");                   
                        sfcmTopLine.setAttribute("x","102.76402");
                        sfcmTopLine.setAttribute("height","28.530001");                    sfcmTopLine.setAttribute("width","1.5119047");
                        sfcmTopLine.setAttribute("style","fill:#ffffff;fill-opacity:1;")
                        svg_sfcm.append(sfcmTopLine);
                        //sfcm connector
                        var sfcmConnector = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        sfcmConnector.setAttribute("d","m 102.76392,53.124103 v -2.11646 a 9.950645,11.831466 0 0 0 8.04212,-11.00311 l 0.0129,-0.59855 a 9.950645,11.831466 0 0 0 -8.05492,-11.60491 v -2.11268 a 11.688061,13.919373 0 0 1 9.79194,13.71759 l -0.0146,0.70404 a 11.688061,13.919373 0 0 1 -9.77737,13.01408 z"); //Set path's data
                        sfcmConnector.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        svg_sfcm.append(sfcmConnector);
                        //sfcm bottom line
                        var sfcmBottomLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        sfcmBottomLine.setAttribute("y","52.449112");                   
                        sfcmBottomLine.setAttribute("x","102.76402");
                        sfcmBottomLine.setAttribute("height","101.29762");                    sfcmBottomLine.setAttribute("width","1.5119047");
                        sfcmBottomLine.setAttribute("style","display:inline;fill:#ffffff;")
                        svg_sfcm.append(sfcmBottomLine);
                    }
                    $scope.svg_bcm = function svg_bcmLoad(){
                       var svgBCMWrapper = document.createElement("div");
                       svgBCMWrapper.setAttribute("class","bcmWrapper");
                       $scope.bsContainer.append(svgBCMWrapper);
                       var svg_bcm = document.createElementNS("http://www.w3.org/2000/svg", 'svg'); //create svg element
                        svg_bcm.setAttribute("viewBox","0 0 210 227");
                        svg_bcm.setAttribute("preserveAspectRatio","xMidYMid meet");
                        svg_bcm.setAttribute("version","1.1");
                        svg_bcm.setAttribute("class","bcm");
                        svgBCMWrapper.append(svg_bcm);
                        //bcm top line
                        var bcmTopLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        bcmTopLine.setAttribute("y","0");                   
                        bcmTopLine.setAttribute("x","98.273804");
                        bcmTopLine.setAttribute("height","28.530001");                    bcmTopLine.setAttribute("width","1.5119047");
                        bcmTopLine.setAttribute("style","display:inline;fill:#ffffff;")
                        svg_bcm.append(bcmTopLine);
                        //bcm connector
                        var bcmConnector = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bcmConnector.setAttribute("d","m 98.273694,53.388681 v -2.11646 a 9.9506448,11.831466 0 0 0 8.042116,-11.003107 l 0.0129,-0.59855 a 9.9506448,11.831466 0 0 0 -8.054916,-11.60491 v -2.112682 a 11.688061,13.919373 0 0 1 9.791936,13.717592 l -0.0146,0.704038 a 11.688061,13.919373 0 0 1 -9.777368,13.014079 z"); //Set path's data
                        bcmConnector.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        svg_bcm.append(bcmConnector);
                        //bcm bottom line
                        var bcmBottomLine = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        bcmBottomLine.setAttribute("y","50.830109");                   
                        bcmBottomLine.setAttribute("x","98.273804");
                        bcmBottomLine.setAttribute("height","37.529999");                    bcmBottomLine.setAttribute("width","1.5119047");
                        bcmBottomLine.setAttribute("style","display:inline;fill:#ffffff;")
                        svg_bcm.append(bcmBottomLine);
                        //bcm bottom box
                        /*var bcmBottomBox = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
                        bcmBottomBox.setAttribute("y","87.11003");                   
                        bcmBottomBox.setAttribute("x","69.61718");
                        bcmBottomBox.setAttribute("height","76.212067");                    bcmBottomBox.setAttribute("width","58.825146");
                        bcmBottomBox.setAttribute("style","fill:none;fill-opacity:1;stroke:#ffffff;stroke-width:1.61618006;")
                        svg_bcm.append(bcmBottomBox);*/
                        //bcm bottom path 
                        var bcmBottomPath = document.createElementNS("http://www.w3.org/2000/svg", 'path');
                        bcmBottomPath.setAttribute("d","M 263.11914 514.21094 L 263.11914 802.25586 L 485.45117 802.25586 L 485.45117 514.21094 L 263.11914 514.21094 z M 268.78906 519.88086 L 479.78125 519.88086 L 479.78125 796.58789 L 268.78906 796.58789 L 268.78906 519.88086 z "); //Set path's data
                        bcmBottomPath.setAttribute("style","display:inline;opacity:1;fill:#ffffff;fill-opacity:1;"); //Set path's styles
                        bcmBottomPath.setAttribute("transform","scale(0.26458333) translate(0,-180.87762149)");
                        //bcmBottomPath.setAttribute("transform","translate(57.466688,0.87762149)");
                        svg_bcm.append(bcmBottomPath);

                    }
                    //create PDU SVG START
                    if($rootScope.bcmCount === 0 && $rootScope.objSFCM.length === 0){
                      $scope.svg_pdu();  
                    }
                    else{
                        $scope.svg_pduWithLine();
                        //create svgs START
                        for(var i=0;i < $rootScope.objBCM.length;i++){
                            $scope.svg_bcm();
                            //svg_bcmLabel();
                        }
                        //for(var i=0;i < $scope.objSFCM.length;i++){
                            //$scope.svg_sfcm();
                            //svg_sfcmLabel();
                        //}
                    }
                    //create svgs END


            }).catch(function (response){
                $scope.networkFailure=true;
            });
      } //invoke deviceStatus function: END
	
   //service or function to draw the SVG mimic: END
   $scope.invokeDeviceStatusService();	
	
	/*$scope.deviceStatusPromise = $interval(function () {
		$scope.invokeDeviceStatusService();
	}, DATADELAY);*/
	
	/*$scope.$on('$destroy', function () {
        $interval.cancel($scope.deviceStatusPromise);
    });*/
 //});
 });
//MS - Home Controller: END
